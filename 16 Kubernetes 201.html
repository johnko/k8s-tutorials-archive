<!DOCTYPE html>
<html id="docs" class="flip-nav" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	
<script type="text/javascript" async="" src="16%20Kubernetes%20201_files/analytics.js"></script><script id="pd-rating-js" src="16%20Kubernetes%20201_files/rating.js"></script><script async="" src="16%20Kubernetes%20201_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Kubernetes 201 - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="https://kubernetes.io/images/favicon.png">

<style class="anchorjs"></style><link rel="stylesheet" href="16%20Kubernetes%20201_files/base_fonts.css">
<link rel="stylesheet" media="screen" href="16%20Kubernetes%20201_files/styles.css" integrity="sha256-qEj5wTH/mS3iXIbsOi/JROhtSGZrzV8GD4gVdqBLN1Q=">
<link rel="stylesheet" href="16%20Kubernetes%20201_files/jquery-ui.css">
<link rel="stylesheet" href="16%20Kubernetes%20201_files/sweetalert.css">
<link rel="stylesheet" href="16%20Kubernetes%20201_files/callouts.css">
<link rel="stylesheet" href="16%20Kubernetes%20201_files/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta property="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/docs/tutorials/k8s201/">
<meta name="og:title" content="Kubernetes 201">
<meta name="twitter:title" content="Kubernetes 201">

<meta name="twitter:image:alt" content="Kubernetes">

<script src="16%20Kubernetes%20201_files/anchor-4.js"></script>
<script src="16%20Kubernetes%20201_files/jquery-3.js"></script>
<script src="16%20Kubernetes%20201_files/jquery-ui-1.js"></script>
<script src="16%20Kubernetes%20201_files/bootstrap-3.js"></script>
<script src="16%20Kubernetes%20201_files/sweetalert-1.js"></script>
<script src="16%20Kubernetes%20201_files/script.js"></script>
<script src="16%20Kubernetes%20201_files/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="https://kubernetes.io/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="https://kubernetes.io/docs/home/" class="active">Documentation</a></li>
            
            <li><a href="https://kubernetes.io/blog/">Blog</a></li>
            
            <li><a href="https://kubernetes.io/partners/">Partners</a></li>
            
            <li><a href="https://kubernetes.io/community/">Community</a></li>
            
            <li><a href="https://kubernetes.io/case-studies/">Case Studies</a></li>
            
            
            
             <li>
                <a href="#">
                    English <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/cn/">Chinese</a></li>
                
                </ul>
            </li>
         
            <li>
                <a href="#">
                    v1.11 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/">v1.11</a></li>
                
                    <li><a href="https://v1-10.docs.kubernetes.io/">v1.10</a></li>
                
                    <li><a href="https://v1-9.docs.kubernetes.io/">v1.9</a></li>
                
                    <li><a href="https://v1-8.docs.kubernetes.io/">v1.8</a></li>
                
                    <li><a href="https://v1-7.docs.kubernetes.io/">v1.7</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude="">Learn Kubernetes Basics</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude=""><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="https://kubernetes.io/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="https://kubernetes.io/docs/home/">Documentation</a></h3>
           <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="https://kubernetes.io/editdocs/" data-auto-burger-exclude="">help contribute to the docs</a>!</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="https://kubernetes.io/docs/community/">Community</a></h3>
           <p>If you need help, you can connect with other Kubernetes 
users and the Kubernetes authors, attend community events, and watch 
video presentations from around the web.</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="https://kubernetes.io/blog/">Blog</a></h3>
           <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>

        </div>
         
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude="">View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io/" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			













<h1>Tutorials</h1>
<h5></h5>






<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="https://kubernetes.io/docs/home/">DOCUMENTATION</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/setup/">SETUP</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/concepts/">CONCEPTS</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/tasks/">TASKS</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/tutorials/" class="YAH">TUTORIALS</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/reference/">REFERENCE</a></li>
		
		
		<li><a href="https://kubernetes.io/docs/contribute/">CONTRIBUTE</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/">
		<input id="search" name="q" placeholder="Search" aria-label="Search" type="text">
	</form>
</div>

		</section>
		
		

		<section id="encyclopedia">
			
<div id="docsToc">
     <div class="pi-accordion"><div class="container">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="Tutorials" href="https://kubernetes.io/docs/tutorials/"><div class="title">Tutorials</div></a>

	
	
		
		
<a class="item" data-title="Hello Minikube" href="https://kubernetes.io/docs/tutorials/hello-minikube/"><div class="title">Hello Minikube</div></a>

		
	
		
		
	<div class="item" data-title="Learn Kubernetes Basics"><div class="title">Learn Kubernetes Basics</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
		<a class="item" data-title="Learn Kubernetes Basics" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/"><div class="title">Learn Kubernetes Basics</div></a>
		
		
	
	
		
		
	<div class="item" data-title="Create a Cluster"><div class="title">Create a Cluster</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Using Minikube to Create a Cluster" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/"><div class="title">Using Minikube to Create a Cluster</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Creating a Cluster" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/create-cluster/cluster-interactive/"><div class="title">Interactive Tutorial - Creating a Cluster</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Deploy an App"><div class="title">Deploy an App</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Using kubectl to Create a Deployment" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/"><div class="title">Using kubectl to Create a Deployment</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Deploying an App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/"><div class="title">Interactive Tutorial - Deploying an App</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Explore Your App"><div class="title">Explore Your App</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Viewing Pods and Nodes" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/explore/explore-intro/"><div class="title">Viewing Pods and Nodes</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Exploring Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/explore/explore-interactive/"><div class="title">Interactive Tutorial - Exploring Your App</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Expose Your App Publicly"><div class="title">Expose Your App Publicly</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Using a Service to Expose Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-intro/"><div class="title">Using a Service to Expose Your App</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Exposing Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-interactive/"><div class="title">Interactive Tutorial - Exposing Your App</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Scale Your App"><div class="title">Scale Your App</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Running Multiple Instances of Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/scale/scale-intro/"><div class="title">Running Multiple Instances of Your App</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Scaling Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/scale/scale-interactive/"><div class="title">Interactive Tutorial - Scaling Your App</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Update Your App"><div class="title">Update Your App</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Performing a Rolling Update" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/update/update-intro/"><div class="title">Performing a Rolling Update</div></a>

		
	
		
		
<a class="item" data-title="Interactive Tutorial - Updating Your App" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/update/update-interactive/"><div class="title">Interactive Tutorial - Updating Your App</div></a>

		
	

		</div>
	</div></div></div>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Online Training Courses"><div class="title">Online Training Courses</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Overview of Kubernetes Online Training" href="https://kubernetes.io/docs/tutorials/online-training/overview/"><div class="title">Overview of Kubernetes Online Training</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Configuration"><div class="title">Configuration</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Configuring Redis using a ConfigMap" href="https://kubernetes.io/docs/tutorials/configuration/configure-redis-using-configmap/"><div class="title">Configuring Redis using a ConfigMap</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Stateless Applications"><div class="title">Stateless Applications</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Exposing an External IP Address to Access an Application in a Cluster" href="https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/"><div class="title">Exposing an External IP Address to Access an Application in a Cluster</div></a>

		
	
		
		
<a class="item" data-title="Example: Deploying PHP Guestbook application with Redis" href="https://kubernetes.io/docs/tutorials/stateless-application/guestbook/"><div class="title">Example: Deploying PHP Guestbook application with Redis</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Stateful Applications"><div class="title">Stateful Applications</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="StatefulSet Basics" href="https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/"><div class="title">StatefulSet Basics</div></a>

		
	
		
		
<a class="item" data-title="Example: Deploying WordPress and MySQL with Persistent Volumes" href="https://kubernetes.io/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/"><div class="title">Example: Deploying WordPress and MySQL with Persistent Volumes</div></a>

		
	
		
		
<a class="item" data-title="Example: Deploying Cassandra with Stateful Sets" href="https://kubernetes.io/docs/tutorials/stateful-application/cassandra/"><div class="title">Example: Deploying Cassandra with Stateful Sets</div></a>

		
	
		
		
<a class="item" data-title="Running ZooKeeper, A Distributed System Coordinator" href="https://kubernetes.io/docs/tutorials/stateful-application/zookeeper/"><div class="title">Running ZooKeeper, A Distributed System Coordinator</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Clusters"><div class="title">Clusters</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="AppArmor" href="https://kubernetes.io/docs/tutorials/clusters/apparmor/"><div class="title">AppArmor</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
	<div class="item" data-title="Services"><div class="title">Services</div><div class="wrapper" style="height: 0px;"><div class="content">
		<div class="container">
		
		
	
	
		
		
<a class="item" data-title="Using Source IP" href="https://kubernetes.io/docs/tutorials/services/source-ip/"><div class="title">Using Source IP</div></a>

		
	

		</div>
	</div></div></div>

		
	
		
		
<a class="item" data-title="Kubernetes 101" href="https://kubernetes.io/docs/tutorials/k8s101/"><div class="title">Kubernetes 101</div></a>

		
	
		
		
<a class="item yah" data-title="Kubernetes 201" href="https://kubernetes.io/docs/tutorials/k8s201/"><div class="title">Kubernetes 201</div></a>

		
	






     </div></div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 

			<div id="docsContent">
				
<p><a href="https://github.com/kubernetes/website/edit/master/content/en/docs/tutorials/k8s201.md" id="editPageButton" target="_blank">Edit This Page</a></p>

<h1>Kubernetes 201</h1>



<p>For Kubernetes 201, we will pick up where 101 left off and cover some
 slightly more advanced topics in Kubernetes, related to application 
productionization, Deployment and scaling.</p>

<p>If you went through <a href="https://kubernetes.io/docs/tutorials/k8s101/">Kubernetes 101</a>, you learned about kubectl, Pods, Volumes, and multiple containers.</p>












<ul id="markdown-toc">










<li><a href="#objectives">Objectives</a></li>












<li><a href="#before-you-begin">Before you begin</a></li>












<li><a href="#labels">Labels</a></li>




<li><a href="#deployments">Deployments</a></li>




<li><a href="#services">Services</a></li>




<li><a href="#health-checking">Health Checking</a></li>




























<li><a href="#what-s-next">What's next</a></li>



</ul>



<h2 id="objectives">Objectives<a class="anchorjs-link " href="#objectives" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<ul>
<li>Add labels to the Pod.</li>
<li>Manage a Deployment.</li>
<li>Manage a Service.</li>
<li>What is the health checking.</li>
</ul>





<h2 id="before-you-begin">Before you begin<a class="anchorjs-link " href="#before-you-begin" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<ul>
<li><p>You need to have a Kubernetes cluster, and the kubectl command-line tool must
be configured to communicate with your cluster. If you do not already have a
cluster, you can create one by using
<a href="https://kubernetes.io/docs/getting-started-guides/minikube">Minikube</a>,
or you can use one of these Kubernetes playgrounds:</p></li>
</ul>

<ul>
<li><a href="https://www.katacoda.com/courses/kubernetes/playground" target="_blank">Katacoda</a></li>
<li><a href="http://labs.play-with-k8s.com/" target="_blank">Play with Kubernetes</a></li>
</ul>
 

<p>To check the version, enter <code>kubectl version</code>.</p>

<ul>
<li>In order for the kubectl usage examples to work, make sure you have an examples directory locally, either from <a href="https://github.com/kubernetes/kubernetes/releases" target="_blank">a release</a> or <a href="https://github.com/kubernetes/kubernetes" target="_blank">the source</a>.</li>
</ul>




<h2 id="labels">Labels<a class="anchorjs-link " href="#labels" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>

<p>Having already learned about Pods and how to create them, you may be 
struck by an urge to create many, many Pods.  Please do!  But eventually
 you will need a system to organize these Pods into groups.  The system 
for achieving this in Kubernetes is Labels.  Labels are key-value pairs 
that are attached to each object in Kubernetes.  Label selectors can be 
passed along with a RESTful <code>list</code> request to the apiserver to retrieve a list of objects which match that label selector.</p>

<p>To add a label, add a labels section under metadata in the Pod definition:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#bbb">  </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>env:<span style="color:#bbb"> </span>test</code></pre></div>
<p>For example, here is the nginx Pod definition with labels (<a href="https://kubernetes.io/examples/pods/pod-nginx.yaml">pod-nginx.yaml</a>):</p>

<table class="includecode" id="pods-pod-nginx-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/pods/pod-nginx.yaml" download="pods/pod-nginx.yaml">
                    <code>pods/pod-nginx.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('pods-pod-nginx-yaml')" title="Copy pods/pod-nginx.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Pod<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>env:<span style="color:#bbb"> </span>test<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>image:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>imagePullPolicy:<span style="color:#bbb"> </span>IfNotPresent<span style="color:#bbb">
</span><span style="color:#bbb">  </span>nodeSelector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>disktype:<span style="color:#bbb"> </span>ssd<span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<p>Create the labeled Pod:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f https://k8s.io/examples/pods/pod-nginx.yaml</code></pre></div>
<p>List all Pods with the label <code>env=test</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods -l <span style="color:#b8860b">env</span><span style="color:#666">=</span>test</code></pre></div>
<p>Delete the Pod by label:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete pod -l <span style="color:#b8860b">env</span><span style="color:#666">=</span>test</code></pre></div>
<p>For more information, see <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">Labels</a>.
They are a core concept used by two additional Kubernetes building blocks: Deployments and Services.</p>

<h2 id="deployments">Deployments<a class="anchorjs-link " href="#deployments" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>

<p>Now that you know how to make awesome, multi-container, labeled Pods 
and you want to use them to build an application, you might be tempted 
to just start building a whole bunch of individual Pods, but if you do 
that, a whole host of operational concerns pop up.  For example: how 
will you scale the number of Pods up or down?  How will you roll out a 
new release?</p>

<p>The answer to those questions and more is to use a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a> to manage maintaining and updating your running <em>Pods</em>.</p>

<p>A Deployment object defines a Pod creation template (a 
“cookie-cutter” if you will) and desired replica count.  The Deployment 
uses a label selector to identify the Pods it manages, and will create 
or delete Pods as needed to meet the replica count.  Deployments are 
also used to manage safely rolling out changes to your running Pods.</p>

<p>Here is a Deployment that instantiates two nginx Pods:</p>

<table class="includecode" id="application-deployment-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/deployment.yaml" download="application/deployment.yaml">
                    <code>application/deployment.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('application-deployment-yaml')" title="Copy application/deployment.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># for versions before 1.9.0 use apps/v1beta2</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>nginx-deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>selector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>matchLabels:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span>replicas:<span style="color:#bbb"> </span><span style="color:#666">2</span><span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># tells deployment to run 2 pods matching the template</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>template:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">        </span>image:<span style="color:#bbb"> </span>nginx:<span style="color:#666">1.7</span>.<span style="color:#666">9</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<h3 id="deployment-management">Deployment Management<a class="anchorjs-link " href="#deployment-management" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

<p>Create an nginx Deployment:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f https://k8s.io/examples/application/deployment.yaml</code></pre></div>
<p>List all Deployments:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deployment</code></pre></div>
<p>List the Pods created by the Deployment:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods -l <span style="color:#b8860b">app</span><span style="color:#666">=</span>nginx</code></pre></div>
<p>Upgrade the nginx container from 1.7.9 to 1.8 by changing the Deployment and calling <code>apply</code>.  The following config
contains the desired changes:</p>

<table class="includecode" id="application-deployment-update-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/deployment-update.yaml" download="application/deployment-update.yaml">
                    <code>application/deployment-update.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('application-deployment-update-yaml')" title="Copy application/deployment-update.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># for versions before 1.9.0 use apps/v1beta2</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>nginx-deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>selector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>matchLabels:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span>replicas:<span style="color:#bbb"> </span><span style="color:#666">2</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>template:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">        </span>image:<span style="color:#bbb"> </span>nginx:<span style="color:#666">1.8</span><span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># Update the version of nginx from 1.7.9 to 1.8</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl apply -f https://k8s.io/examples/application/deployment-update.yaml</code></pre></div>
<p>Watch the Deployment create Pods with new names and delete the old Pods:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods -l <span style="color:#b8860b">app</span><span style="color:#666">=</span>nginx</code></pre></div>
<p>Delete the Deployment by name:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete deployment nginx-deployment</code></pre></div>
<p>For more information, such as how to rollback Deployment changes to a previous version, see <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"><em>Deployments</em></a>.</p>

<h2 id="services">Services<a class="anchorjs-link " href="#services" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>

<p>Once you have a replicated set of Pods, you need an abstraction that 
enables connectivity between the layers of your application.  For 
example, if you have a Deployment managing your backend jobs, you don’t 
want to have to reconfigure your front-ends whenever you re-scale your 
backends.  Likewise, if the Pods in your backends are scheduled (or 
rescheduled) onto different machines, you can’t be required to 
re-configure your front-ends.  In Kubernetes, the service abstraction 
achieves these goals.  A service provides a way to refer to a set of 
Pods (selected by labels) with a single static IP address. It may also 
provide load balancing, if supported by the provider.</p>

<p>For example, here is a service that balances across the Pods created in the previous nginx Deployment example (<a href="https://kubernetes.io/examples/service/nginx-service.yaml">service.yaml</a>):</p>

<table class="includecode" id="service-nginx-service-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/service/nginx-service.yaml" download="service/nginx-service.yaml">
                    <code>service/nginx-service.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('service-nginx-service-yaml')" title="Copy service/nginx-service.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>nginx-service<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>port:<span style="color:#bbb"> </span><span style="color:#666">8000</span><span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># the port that this service should serve on</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-style:italic"># the container on each pod to connect to, can be a name</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-style:italic"># (e.g. 'www') or a number (e.g. 80)</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>targetPort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>protocol:<span style="color:#bbb"> </span>TCP<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-style:italic"># just like the selector in the deployment,</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-style:italic"># but this time it identifies the set of pods to load balance</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#080;font-style:italic"># traffic to.</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>selector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<h3 id="service-management">Service Management<a class="anchorjs-link " href="#service-management" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

<p>Create an nginx Service:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f https://k8s.io/examples/service/nginx-service.yaml</code></pre></div>
<p>List all services:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get services</code></pre></div>
<p>On most providers, the service IPs are not externally accessible. The
 easiest way to test that the service is working is to create a busybox 
Pod and exec commands on it remotely. See the <a href="https://kubernetes.io/docs/user-guide/kubectl-overview/">command execution documentation</a> for details.</p>

<p>Provided the service IP is accessible, you should be able to access its http endpoint with wget on the exposed port:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#a2f">export</span> <span style="color:#b8860b">SERVICE_IP</span><span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">$(</span>kubectl get service nginx-service -o go-template<span style="color:#666">=</span><span style="color:#b44">'{{.spec.clusterIP}}'</span><span style="color:#a2f;font-weight:bold">)</span>
<span style="color:#a2f">export</span> <span style="color:#b8860b">SERVICE_PORT</span><span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">$(</span>kubectl get service nginx-service -o go-template<span style="color:#666">=</span><span style="color:#b44">'{{(index .spec.ports 0).port}}'</span><span style="color:#a2f;font-weight:bold">)</span></code></pre></div>
<p>Check <code>$SERVICE_IP</code> and <code>$SERVICE_PORT</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#a2f">echo</span> <span style="color:#b44">"</span><span style="color:#b8860b">$SERVICE_IP</span><span style="color:#b44">:</span><span style="color:#b8860b">$SERVICE_PORT</span><span style="color:#b44">"</span></code></pre></div>
<p>Then, create a busybox Pod:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl run busybox --generator<span style="color:#666">=</span>run-pod/v1 --image<span style="color:#666">=</span>busybox --restart<span style="color:#666">=</span>Never --tty -i --env <span style="color:#b44">"SERVICE_IP=</span><span style="color:#b8860b">$SERVICE_IP</span><span style="color:#b44">"</span> --env <span style="color:#b44">"SERVICE_PORT=</span><span style="color:#b8860b">$SERVICE_PORT</span><span style="color:#b44">"</span>
u@busybox$ wget -qO- http://<span style="color:#b8860b">$SERVICE_IP</span>:<span style="color:#b8860b">$SERVICE_PORT</span> <span style="color:#080;font-style:italic"># Run in the busybox container
</span><span style="color:#080;font-style:italic"></span>u@busybox$ <span style="color:#a2f">exit</span> <span style="color:#080;font-style:italic"># Exit the busybox container
</span><span style="color:#080;font-style:italic"></span>
kubectl delete pod busybox # Clean up the pod we created with <span style="color:#b44">"kubectl run"</span></code></pre></div>
<p>The service definition <a href="https://kubernetes.io/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/">exposed the Nginx Service</a> as port 8000 (<code>$SERVICE_PORT</code>). We can also access the service from a host running Kubernetes using that port:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget -qO- http://<span style="color:#b8860b">$SERVICE_IP</span>:<span style="color:#b8860b">$SERVICE_PORT</span> # Run on a Kubernetes host</code></pre></div>
<p>(This works on AWS with Weave.)</p>

<p>To delete the service by name:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete service nginx-service</code></pre></div>
<p>When created, each service is assigned a unique IP address.  This 
address is tied to the lifespan of the Service, and will not change 
while the Service is alive.  Pods can be configured to talk to the 
service, and know that communication to the service will be 
automatically load-balanced out to some Pod that is a member of the set 
identified by the label selector in the Service.</p>

<p>For more information, see <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Services</a>.</p>

<h2 id="health-checking">Health Checking<a class="anchorjs-link " href="#health-checking" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>

<p>When I write code it never crashes, right?  Sadly the <a href="https://github.com/kubernetes/kubernetes/issues" target="_blank">Kubernetes issues list</a> indicates otherwise…</p>

<p>Rather than trying to write bug-free code, a better approach is to use a management system to perform periodic health checking
and repair of your application.  That way a system outside of your application itself is responsible for monitoring the
application and taking action to fix it.  It’s important that the system be outside of the application, since if
your application fails and the health checking agent is part of your application, it may fail as well and you’ll never know.
In Kubernetes, the health check monitor is the Kubelet agent.</p>

<h3 id="process-health-checking">Process Health Checking<a class="anchorjs-link " href="#process-health-checking" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

<p>The simplest form of health-checking is just process level health checking.  The Kubelet constantly asks the Docker daemon
if the container process is still running, and if not, the container process is restarted.  In all of the Kubernetes examples
you have run so far, this health checking was actually already enabled.  It’s on for every single container that runs in
Kubernetes.</p>

<h3 id="application-health-checking">Application Health Checking<a class="anchorjs-link " href="#application-health-checking" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

<p>However, in many cases this low-level health checking is insufficient.  Consider, for example, the following code:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">lockOne <span style="color:#666">:=</span> sync.Mutex{}
lockTwo <span style="color:#666">:=</span> sync.Mutex{}

<span style="color:#a2f;font-weight:bold">go</span> <span style="color:#a2f;font-weight:bold">func</span>() {
  lockOne.Lock();
  lockTwo.Lock();
  <span style="color:#666">...</span>
}()

lockTwo.Lock();
lockOne.Lock();</code></pre></div>
<p>This is a classic example of a problem in computer science known as <a href="https://en.wikipedia.org/wiki/Deadlock" target="_blank">“Deadlock”</a>.
 From Docker’s perspective your application is
still operating and the process is still running, but from your 
application’s perspective your code is locked up and will never respond 
correctly.</p>

<p>To address this problem, Kubernetes supports user implemented application health-checks.  These checks are performed by the
Kubelet to ensure that your application is operating correctly for a definition of “correctly” that <em>you</em> provide.</p>

<p>Currently, there are three types of application health checks that you can choose from:</p>

<ul>
<li>HTTP Health Checks - The Kubelet will call a web hook.  If it 
returns between 200 and 399, it is considered success, failure 
otherwise. See health check examples <a href="https://kubernetes.io/docs/user-guide/liveness/">here</a>.</li>
<li>Container Exec - The Kubelet will execute a command inside your 
container.  If it exits with status 0 it will be considered a success. 
See health check examples <a href="https://kubernetes.io/docs/user-guide/liveness/">here</a>.</li>
<li>TCP Socket - The Kubelet will attempt to open a socket to your 
container.  If it can establish a connection, the container is 
considered healthy, if it can’t it is considered a failure.</li>
</ul>

<p>In all cases, if the Kubelet discovers a failure the container is restarted.</p>

<p>The container health checks are configured in the <code>livenessProbe</code> section of your container config. There you can also specify an <code>initialDelaySeconds</code>
 that is a grace period from when the container is started to when 
health checks are performed, to enable your container to perform any 
necessary initialization.</p>

<p>Here is an example config for a Pod with an HTTP health check
(<a href="https://kubernetes.io/examples/pods/probe/pod-with-http-healthcheck.yaml">pod-with-http-healthcheck.yaml</a>):</p>

<table class="includecode" id="pods-probe-pod-with-http-healthcheck-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/pods/probe/pod-with-http-healthcheck.yaml" download="pods/probe/pod-with-http-healthcheck.yaml">
                    <code>pods/probe/pod-with-http-healthcheck.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('pods-probe-pod-with-http-healthcheck-yaml')" title="Copy pods/probe/pod-with-http-healthcheck.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Pod<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>pod-with-http-healthcheck<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>image:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-style:italic"># defines the health checking</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>livenessProbe:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># an http probe</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>httpGet:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>path:<span style="color:#bbb"> </span>/_status/healthz<span style="color:#bbb">
</span><span style="color:#bbb">        </span>port:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># length of time to wait for a pod to initialize</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># after pod startup, before applying health checking</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>initialDelaySeconds:<span style="color:#bbb"> </span><span style="color:#666">30</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>timeoutSeconds:<span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<p>And here is an example config for a Pod with a TCP Socket health check
(<a href="https://kubernetes.io/examples/pods/probe/pod-with-tcp-socket-healthcheck.yaml">pod-with-tcp-socket-healthcheck.yaml</a>):</p>

<table class="includecode" id="pods-probe-pod-with-tcp-socket-healthcheck-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/pods/probe/pod-with-tcp-socket-healthcheck.yaml" download="pods/probe/pod-with-tcp-socket-healthcheck.yaml">
                    <code>pods/probe/pod-with-tcp-socket-healthcheck.yaml</code>
                </a>
                <img src="16%20Kubernetes%20201_files/copycode.svg" style="max-height:24px" onclick="copyCode('pods-probe-pod-with-tcp-socket-healthcheck-yaml')" title="Copy pods/probe/pod-with-tcp-socket-healthcheck.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Pod<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>pod-with-tcp-socket-healthcheck<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>redis<span style="color:#bbb">
</span><span style="color:#bbb">    </span>image:<span style="color:#bbb"> </span>redis<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#080;font-style:italic"># defines the health checking</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>livenessProbe:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># a TCP socket probe</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>tcpSocket:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>port:<span style="color:#bbb"> </span><span style="color:#666">6379</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># length of time to wait for a pod to initialize</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#080;font-style:italic"># after pod startup, before applying health checking</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>initialDelaySeconds:<span style="color:#bbb"> </span><span style="color:#666">30</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>timeoutSeconds:<span style="color:#bbb"> </span><span style="color:#666">1</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">6379</span><span style="color:#bbb">
</span><span style="color:#bbb"></span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<p>For more information about health checking, see <a href="https://kubernetes.io/docs/user-guide/pod-states/#container-probes">Container Probes</a>.</p>



















<h2 id="what-s-next">What's next<a class="anchorjs-link " href="#what-s-next" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em/1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>For a complete application see the <a href="https://github.com/kubernetes/examples/tree/master/guestbook/" target="_blank">guestbook example</a>.</p>







			</div>
		</section>
    <div id="pre-footer"> 
      <div class="issue-button-container">
        <p><a href=""><img src="16%20Kubernetes%20201_files/k8s201.gif" alt="Analytics"></a></p>
        
        
        <script type="text/javascript">
        PDRTJS_settings_8345992 = {
        "id" : "8345992",
        "unique_id" : "\/docs\/tutorials\/k8s201\/",
        "title" : "Kubernetes 201",
        "permalink" : "https:\/\/kubernetes.io\/docs\/tutorials\/k8s201\/"
        };
        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
        
        
        
        <a href="https://kubernetes.io/docs/editdocs#docs/tutorials/k8s201.md" class="button issue">Edit This Page</a>
        
      </div>
      
        
      <div id="lastedit" class="lastedit issue-button-container">
        Page last modified on August 24, 2018 at 2:00 PM PST by  <a href="https://github.com/kubernetes/website/commit/cbf9e1d8725d3b2299b96c47fbca411a3672cc34/">Fixed typo s/SERVCEPORT/SERVICEPORT/ (#10066)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/tutorials/k8s201.md">Page History</a>)
      </div>
        
      
    </div>
		<footer>
    <main class="light-text">
        <nav>
            
            
            
            <a href="https://kubernetes.io/docs/home/">Documentation</a>
            
            <a href="https://kubernetes.io/blog/">Blog</a>
            
            <a href="https://kubernetes.io/partners/">Partners</a>
            
            <a href="https://kubernetes.io/community/">Community</a>
            
            <a href="https://kubernetes.io/case-studies/">Case Studies</a>
            
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io/" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            © 2018 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright © 2018 The Linux Foundation ®. All rights 
reserved. The Linux Foundation has registered trademarks and uses 
trademarks. For a list of trademarks of The Linux Foundation, please see
 our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div id="miceType" class="center">
            ICP license: 京ICP备17074266号-3
        </div>
    </main>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	

<div class="pi-pushmenu" id="primary"><div class="overlay"><div class="sled" style="right: 0px;"><div class="content"><ul><li><a href="https://kubernetes.io/docs/home/" class="active" id="">Documentation</a></li><li><a href="https://kubernetes.io/blog/" id="">Blog</a></li><li><a href="https://kubernetes.io/partners/" id="">Partners</a></li><li><a href="https://kubernetes.io/community/" id="">Community</a></li><li><a href="https://kubernetes.io/case-studies/" id="">Case Studies</a></li><li><a href="#" id="">
                    English <span class="ui-icon ui-icon-carat-1-s"></span>
                </a></li><li><a href="https://kubernetes.io/cn/" id="">Chinese</a></li><li><a href="#" id="">
                    v1.11 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a></li><li><a href="https://kubernetes.io/" id="">v1.11</a></li><li><a href="https://v1-10.docs.kubernetes.io/" id="">v1.10</a></li><li><a href="https://v1-9.docs.kubernetes.io/" id="">v1.9</a></li><li><a href="https://v1-8.docs.kubernetes.io/" id="">v1.8</a></li><li><a href="https://v1-7.docs.kubernetes.io/" id="">v1.7</a></li><li><a href="https://kubernetes.io/docs/tutorials/hello-minikube/" id="">Get Started</a></li><li><a href="https://kubernetes.io/docs/home/" id="">Documentation</a></li><li><a href="https://kubernetes.io/docs/community/" id="">Community</a></li><li><a href="https://kubernetes.io/blog/" id="">Blog</a></li><li><a href="https://twitter.com/kubernetesio" class="twitter" id=""><span>Twitter</span></a></li><li><a href="https://github.com/kubernetes/kubernetes" class="github" id=""><span>GitHub</span></a></li><li><a href="http://slack.k8s.io/" class="slack" id=""><span>Slack Slack</span></a></li><li><a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow" id=""><span>Stack Overflow</span></a></li><li><a href="https://discuss.kubernetes.io/" class="mailing-list" id=""><span>Forum</span></a></li><li><a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar" id=""><span>Events Calendar</span></a></li></ul></div><button class="push-menu-close-button"></button></div></div></div></body></html>